%
% trapez.tex -- Illustration der Trapezregel
%
% (c) 2020 Prof Dr Andreas MÃ¼ller, Hochschule Rapperswil
%
\documentclass[tikz]{standalone}
\usepackage{amsmath}
\usepackage{times}
\usepackage{txfonts}
\usepackage{pgfplots}
\usepackage{csvsimple}
\usetikzlibrary{arrows,intersections,math}
\begin{document}
\input{common.inc}
\begin{tikzpicture}[>=latex,thick]

\foreach \x in {1.5,2.5,...,10.5}{
	\fill[color=blue!10] ({\x-0.5},0)--({\x+0.5},0)
		--
		({\x+0.5},{\A*(\x+0.5-1)*(\x+0.5-7)*(\x+0.5-11)+\B})
		--
		({\x-0.5},{\A*(\x-0.5-1)*(\x-0.5-7)*(\x-0.5-11)+\B})
		--cycle;
	\draw[color=blue!50] ({\x-0.5},0)--({\x+0.5},0)
		--
		({\x+0.5},{\A*(\x+0.5-1)*(\x+0.5-7)*(\x+0.5-11)+\B})
		--
		({\x-0.5},{\A*(\x-0.5-1)*(\x-0.5-7)*(\x-0.5-11)+\B})
		--cycle;
}

\xdef\x{3}
\pgfmathparse{\A*(\x-1)*(\x-7)*(\x-11)+\B}
\xdef\y{\pgfmathresult}
\xdef\x{4}
\pgfmathparse{0.5*(\y+\A*(\x-1)*(\x-7)*(\x-11)+\B)}
\xdef\y{\pgfmathresult}
\definecolor{darkgreen}{rgb}{0,0.6,0}
\draw[color=darkgreen,line width=1pt] (3.5,0) -- (3.5,\y);
\node[color=darkgreen] at (3.6,{0.5*\y}) [above,rotate=90]
	{$m=\frac12(f(x_2)+f(x_3))$};

\kurve
%({\x},{\A*(\x-1)*(\x-7)*(\x-11)+\B});

\foreach \x in {\a,...,\b}{
	\draw[color=blue] ({\x},0)--({\x},{\A*(\x-1)*(\x-7)*(\x-11)+\B});
	\draw ({\x},-0.1)--({\x},0.1);
}
\foreach \x in {1,...,7}{
	\node at ({\x+1},-0.1) [below] {$x_{\x}$};
}
\foreach \x in {0,...,6}{
	\node[color=blue] at ({\x+1},{\A*(\x+1-1)*(\x+1-7)*(\x+1-11)+\B}) [above] {$f(x_\x)$};
}
\node[color=blue] at ({10},{\A*(10-1)*(10-7)*(10-11)+\B}) [above] {$f(x_{n-1})$};
\node[color=blue] at ({11},{\A*(11-1)*(11-7)*(11-11)+\B}) [above] {$f(x_{n})$};

\achsen

\node at (9.5,-0.1) [below] {$\mathstrut\cdots$};

\tickszeichnen
\funktion

\end{tikzpicture}
\end{document}
